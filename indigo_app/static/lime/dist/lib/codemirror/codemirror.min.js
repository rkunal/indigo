window.CodeMirror=function(){"use strict";function e(r,i){function cn(e){if(s.onDragEvent&&s.onDragEvent(vn,K(e)))return;Y(e)}function dn(e){return e>=0&&e<Dt.size}function mn(e){return z(Dt,e)}function gn(e,t){Qt=true;var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function yn(e,t){if(!e.styles)e.highlight(_t,e.stateAfter=ai(W(e)),s.tabSize);return e.getContent(s.tabSize,t,s.lineWrapping)}function bn(e){var t={line:0,ch:0};jn(t,{line:Dt.size-1,ch:mn(Dt.size-1).text.length},Nt(e),t,t);Xt=true}function wn(e){var t=[];Dt.iter(0,Dt.size,function(e){t.push(e.text)});return t.join(e||"\n")}function En(e){if(M.scrollTop!=qt){qt=Et.scrollTop=M.scrollTop;ur([])}}function Sn(e){if(s.fixedGutter&&ut.style.left!=Et.scrollLeft+"px")ut.style.left=Et.scrollLeft+"px";if(Et.scrollTop!=qt){qt=Et.scrollTop;if(M.scrollTop!=qt)M.scrollTop=qt;ur([])}if(s.onScroll)s.onScroll(vn)}function xn(e){function u(t){if(b)Et.draggable=false;Rt=false;l();c();if(Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10){Q(t);mr(n.line,n.ch,true);tr()}}function m(e){if(i=="single"){pr(n,e)}else if(i=="double"){var t=xr(e);if(mt(e,h))pr(t.from,p);else pr(h,t.to)}else if(i=="triple"){if(mt(e,h))pr(p,yr({line:e.line,ch:0}));else pr(h,yr({line:e.line+1,ch:0}))}}function g(e){var t=ti(e,true);if(t&&!vt(t,a)){if(!Ht)Hn();a=t;m(t);Xt=false;var n=or();if(t.line>=n.to||t.line<n.from)f=setTimeout(di(function(){g(e)}),150)}}function y(e){clearTimeout(f);var t=ti(e);if(t)m(t);Q(e);tr();Xt=true;w();l()}hr(tt(e,"shiftKey"));for(var t=Z(e);t!=Lt;t=t.parentNode)if(t.parentNode==ct&&t!=at)return;for(var t=Z(e);t!=Lt;t=t.parentNode)if(t.parentNode==ot){if(s.onGutterClick)s.onGutterClick(vn,xt(ot.childNodes,t)+Zt,e);return Q(e)}var n=ti(e);switch(et(e)){case 3:if(d)ri(e);return;case 2:if(n)mr(n.line,n.ch,true);setTimeout(tr,20);Q(e);return}if(!n){if(Z(e)==Et)Q(e);return}if(!Ht)Hn();var r=+(new Date),i="single";if(It&&It.time>r-400&&vt(It.pos,n)){i="triple";Q(e);setTimeout(tr,20);Tr(n.line)}else if(Ft&&Ft.time>r-400&&vt(Ft.pos,n)){i="double";It={time:r,pos:n};Q(e);var o=xr(n);pr(o.from,o.to)}else{Ft={time:r,pos:n}}var a=n,f;if(s.dragDrop&&st&&!s.readOnly&&!vt(Bt.from,Bt.to)&&!mt(n,Bt.from)&&!mt(Bt.to,n)&&i=="single"){if(b)Et.draggable=true;var l=nt(document,"mouseup",di(u),true);var c=nt(Et,"drop",di(u),true);Rt=true;if(Et.dragDrop)Et.dragDrop();return}Q(e);if(i=="single")mr(n.line,n.ch,true);var h=Bt.from,p=Bt.to;var w=nt(document,"mousemove",di(function(e){clearTimeout(f);Q(e);if(!v&&!et(e))y(e);else g(e)}),true);var l=nt(document,"mouseup",di(y),true)}function Tn(e){for(var t=Z(e);t!=Lt;t=t.parentNode)if(t.parentNode==ot)return Q(e);Q(e)}function Nn(e){if(s.onDragEvent&&s.onDragEvent(vn,K(e)))return;Q(e);var t=ti(e,true),n=e.dataTransfer.files;if(!t||s.readOnly)return;if(n&&n.length&&window.FileReader&&window.File){var r=n.length,i=Array(r),o=0;var u=function(e,n){var s=new FileReader;s.onload=function(){i[n]=s.result;if(++o==r){t=yr(t);di(function(){var e=Xn(i.join(""),t,t);pr(t,e)})()}};s.readAsText(e)};for(var a=0;a<r;++a)u(n[a],a)}else{if(Rt&&!(mt(t,Bt.from)||mt(Bt.to,t)))return;try{var i=e.dataTransfer.getData("Text");if(i){vi(function(){var e=Bt.from,n=Bt.to;pr(t,t);if(Rt)Xn("",e,n);Vn(i);tr()})}}catch(e){}}}function Cn(e){var t=Kn();e.dataTransfer.setData("Text",t);if(e.dataTransfer.setDragImage)e.dataTransfer.setDragImage(yt("img"),0,0)}function kn(e,t){if(typeof e=="string"){e=f[e];if(!e)return false}var n=jt;try{if(s.readOnly)zt=true;if(t)jt=null;e(vn)}catch(r){if(r!=it)throw r;return false}finally{jt=n;zt=false}return true}function An(e){function f(){a=true}var t=c(s.keyMap),r=t.auto;clearTimeout(Ln);if(r&&!p(e))Ln=setTimeout(function(){if(c(s.keyMap)==t){s.keyMap=r.call?r.call(null,vn):r}},50);var i=kt[tt(e,"keyCode")],o=false;var u=E&&n;if(i==null||e.altGraphKey)return false;if(tt(e,"altKey"))i="Alt-"+i;if(tt(e,u?"metaKey":"ctrlKey"))i="Ctrl-"+i;if(tt(e,u?"ctrlKey":"metaKey"))i="Cmd-"+i;var a=false;if(tt(e,"shiftKey")){o=h("Shift-"+i,s.extraKeys,s.keyMap,function(e){return kn(e,true)},f)||h(i,s.extraKeys,s.keyMap,function(e){if(typeof e=="string"&&/^go[A-Z]/.test(e))return kn(e)},f)}else{o=h(i,s.extraKeys,s.keyMap,kn,f)}if(a)o=false;if(o){Q(e);ii();if(v){e.oldKeyCode=e.keyCode;e.keyCode=0}}return o}function On(e,t){var n=h("'"+t+"'",s.extraKeys,s.keyMap,function(e){return kn(e,true)});if(n){Q(e);ii()}return n}function _n(e){if(!Ht)Hn();if(v&&e.keyCode==27){e.returnValue=false}if(un){if(Zn())un=false}if(s.onKeyEvent&&s.onKeyEvent(vn,K(e)))return;var t=tt(e,"keyCode");hr(t==16||tt(e,"shiftKey"));var r=An(e);if(E){Mn=r?t:null;if(!r&&t==88&&tt(e,n?"metaKey":"ctrlKey"))Vn("")}}function Dn(e){if(un)Zn();if(s.onKeyEvent&&s.onKeyEvent(vn,K(e)))return;var t=tt(e,"keyCode"),n=tt(e,"charCode");if(E&&t==Mn){Mn=null;Q(e);return}if((E&&(!e.which||e.which<10)||x)&&An(e))return;var r=String.fromCharCode(n==null?t:n);if(s.electricChars&&_t.electricChars&&s.smartIndent&&!s.readOnly){if(_t.electricChars.indexOf(r)>-1)setTimeout(di(function(){Cr(Bt.to.line,"smart")}),75)}if(On(e,r))return;Gn()}function Pn(e){if(s.onKeyEvent&&s.onKeyEvent(vn,K(e)))return;if(tt(e,"keyCode")==16)jt=null}function Hn(){if(s.readOnly=="nocursor")return;if(!Ht){if(s.onFocus)s.onFocus(vn);Ht=true;if(Et.className.search(/\bCodeMirror-focused\b/)==-1)Et.className+=" CodeMirror-focused"}Qn();ii()}function Bn(){if(Ht){if(s.onBlur)s.onBlur(vn);Ht=false;if(nn)di(function(){if(nn){nn();nn=null}})();Et.className=Et.className.replace(" CodeMirror-focused","")}clearInterval(Mt);setTimeout(function(){if(!Ht)jt=null},150)}function jn(e,t,n,r,i){if(zt)return;var o=[];Dt.iter(e.line,t.line+1,function(e){o.push(B(e.text,e.markedSpans))});if(fn){fn.addChange(e.line,n.length,o);while(fn.done.length>s.undoDepth)fn.done.shift()}var u=D(H(o[0]),H(pt(o)),e.ch,t.ch,n);Rn(e,t,u,r,i)}function Fn(e,t){if(!e.length)return;var n=e.pop(),r=[];for(var i=n.length-1;i>=0;i-=1){var s=n[i];var o=[],u=s.start+s.added;Dt.iter(s.start,u,function(e){o.push(B(e.text,e.markedSpans))});r.push({start:s.start,added:s.old.length,old:o});var a={line:s.start+s.old.length-1,ch:St(P(pt(o)),P(pt(s.old)))};Rn({line:s.start,ch:0},{line:u-1,ch:mn(u-1).text.length},s.old,a,a)}Xt=true;t.push(r)}function In(){Fn(fn.done,fn.undone)}function qn(){Fn(fn.undone,fn.done)}function Rn(e,t,n,r,i){function w(e){return e<=Math.min(t.line,t.line+g)?e:e+g}if(zt)return;var o=false,u=rn.text.length;if(!s.lineWrapping)Dt.iter(e.line,t.line+1,function(e){if(!e.hidden&&e.text.length==u){o=true;return true}});if(e.line!=t.line||n.length>1)Qt=true;var a=t.line-e.line,f=mn(e.line),l=mn(t.line);var c=pt(n);if(e.ch==0&&t.ch==0&&P(c)==""){var h=[],p=null;for(var d=0,v=n.length-1;d<v;++d)h.push(new q(P(n[d]),H(n[d])));l.update(l.text,H(c));if(a)Dt.remove(e.line,a,Gt);if(h.length)Dt.insert(e.line,h)}else if(f==l){if(n.length==1){f.update(f.text.slice(0,e.ch)+P(n[0])+f.text.slice(t.ch),H(n[0]))}else{for(var h=[],d=1,v=n.length-1;d<v;++d)h.push(new q(P(n[d]),H(n[d])));h.push(new q(P(c)+f.text.slice(t.ch),H(c)));f.update(f.text.slice(0,e.ch)+P(n[0]),H(n[0]));Dt.insert(e.line+1,h)}}else if(n.length==1){f.update(f.text.slice(0,e.ch)+P(n[0])+l.text.slice(t.ch),H(n[0]));Dt.remove(e.line+1,a,Gt)}else{var h=[];f.update(f.text.slice(0,e.ch)+P(n[0]),H(n[0]));l.update(P(c)+l.text.slice(t.ch),H(c));for(var d=1,v=n.length-1;d<v;++d)h.push(new q(P(n[d]),H(n[d])));if(a>1)Dt.remove(e.line+1,a-1,Gt);Dt.insert(e.line+1,h)}if(s.lineWrapping){var m=Math.max(5,Et.clientWidth/Yr()-3);Dt.iter(e.line,e.line+n.length,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/m)||1;if(t!=e.height)gn(e,t)})}else{Dt.iter(e.line,e.line+n.length,function(e){var t=e.text;if(!e.hidden&&t.length>u){rn=e;u=t.length;on=true;o=false}});if(o)sn=true}Pt=Math.min(Pt,e.line);li(400);var g=n.length-a-1;$t.push({from:e.line,to:t.line+1,diff:g});if(s.onChange){for(var d=0;d<n.length;++d)if(typeof n[d]!="string")n[d]=n[d].text;var y={from:e,to:t,text:n};if(Jt){for(var b=Jt;b.next;b=b.next){}b.next=y}else Jt=y}dr(yr(r),yr(i),w(Bt.from.line),w(Bt.to.line))}function Un(){var e=Dt.height*Kr()+2*Zr();return e*.99>Et.offsetHeight?e:false}function zn(e){var t=Un();M.style.display=t?"block":"none";if(t){L.style.height=ct.style.minHeight=t+"px";M.style.height=Et.clientHeight+"px";if(e!=null){M.scrollTop=Et.scrollTop=e;if(b)setTimeout(function(){if(M.scrollTop!=e)return;M.scrollTop=e+(e?-1:1);M.scrollTop=e},0)}}else{ct.style.minHeight=""}at.style.top=Yt*Kr()+"px"}function Wn(){rn=mn(0);on=true;var e=rn.text.length;Dt.iter(1,Dt.size,function(t){var n=t.text;if(!t.hidden&&n.length>e){e=n.length;rn=t}});sn=false}function Xn(e,t,n){function r(r){if(mt(r,t))return r;if(!mt(n,r))return i;var s=r.line+e.length-(n.line-t.line)-1;var o=r.ch;if(r.line==n.line)o+=pt(e).length-(n.ch-(n.line==t.line?t.ch:0));return{line:s,ch:o}}t=yr(t);if(!n)n=t;else n=yr(n);e=Nt(e);var i;$n(e,t,n,function(e){i=e;return{from:r(Bt.from),to:r(Bt.to)}});return i}function Vn(e,t){$n(Nt(e),Bt.from,Bt.to,function(e){if(t=="end")return{from:e,to:e};else if(t=="start")return{from:Bt.from,to:Bt.from};else return{from:Bt.from,to:e}})}function $n(e,t,n,r){var i=e.length==1?e[0].length+t.ch:pt(e).length;var s=r({line:t.line+e.length-1,ch:i});jn(t,n,e,s.from,s.to)}function Jn(e,t,n){var r=e.line,i=t.line;if(r==i)return mn(r).text.slice(e.ch,t.ch);var s=[mn(r).text.slice(e.ch)];Dt.iter(r+1,i,function(e){s.push(e.text)});s.push(mn(i).text.slice(0,t.ch));return s.join(n||"\n")}function Kn(e){return Jn(Bt.from,Bt.to,e)}function Qn(){if(un)return;At.set(s.pollInterval,function(){Zn();if(Ht)Qn()})}function Gn(){function t(){var n=Zn();if(!n&&!e){e=true;At.set(60,t)}else{un=false;Qn()}}var e=false;un=true;At.set(20,t)}function Zn(){if(!Ht||Ct(S)||s.readOnly)return false;var e=S.value;if(e==Yn)return false;if(!pi)ci();jt=null;var t=0,n=Math.min(Yn.length,e.length);while(t<n&&Yn[t]==e[t])++t;if(t<Yn.length)Bt.from={line:Bt.from.line,ch:Bt.from.ch-(Yn.length-t)};else if(Ut&&vt(Bt.from,Bt.to)&&!Wt)Bt.to={line:Bt.to.line,ch:Math.min(mn(Bt.to.line).text.length,Bt.to.ch+(e.length-t))};Vn(e.slice(t),"end");if(e.length>1e3){S.value=Yn=""}else Yn=e;if(!pi)hi();Wt=false;return true}function er(e){if(!vt(Bt.from,Bt.to)){Yn="";S.value=Kn();if(Ht)dt(S)}else if(e)Yn=S.value=""}function tr(){if(s.readOnly!="nocursor")S.focus()}function nr(){var e=rr();ir(e.x,e.y,e.x,e.yBot);if(!Ht)return;var t=ct.getBoundingClientRect(),n=null;if(e.y+t.top<0)n=true;else if(e.y+t.top+Kr()>(window.innerHeight||document.documentElement.clientHeight))n=false;if(n!=null){var r=F.style.display=="none";if(r){F.style.display="";F.style.left=e.x+"px";F.style.top=e.y-Yt+"px"}F.scrollIntoView(n);if(r)F.style.display="none"}}function rr(){var e=zr(Bt.inverted?Bt.from:Bt.to);var t=s.lineWrapping?Math.min(e.x,G.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function ir(e,t,n,r){var i=sr(e,t,n,r);if(i.scrollLeft!=null){Et.scrollLeft=i.scrollLeft}if(i.scrollTop!=null){M.scrollTop=Et.scrollTop=i.scrollTop}}function sr(e,t,n,r){var i=ei(),o=Zr();t+=o;r+=o;e+=i;n+=i;var u=Et.clientHeight,a=M.scrollTop,f={};var l=Un()||Infinity;var c=t<o+10,h=r+o>l-10;if(t<a)f.scrollTop=c?0:Math.max(0,t);else if(r>a+u)f.scrollTop=(h?l:r)-u;var p=Et.clientWidth,d=Et.scrollLeft;var v=s.fixedGutter?ut.clientWidth:0;var m=e<v+i+10;if(e<d+v||m){if(m)e=0;f.scrollLeft=Math.max(0,e-10-v)}else if(n>p+d-3){f.scrollLeft=n+10-p}return f}function or(e){var t=Kr(),n=(e!=null?e:M.scrollTop)-Zr();var r=Math.max(0,Math.floor(n/t));var i=Math.ceil((n+Et.clientHeight)/t);return{from:X(Dt,r),to:X(Dt,i)}}function ur(e,t,n){function d(){var e=_.firstChild,t=false;Dt.iter(Zt,en,function(n){if(!e)return;if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;if(n.height!=r){gn(n,r);Qt=t=true}}e=e.nextSibling});return t}if(!Et.clientWidth){Zt=en=Yt=0;return}var r=or(n);if(e!==true&&e.length==0&&r.from>Zt&&r.to<en){zn(n);return}var i=Math.max(r.from-100,0),o=Math.min(Dt.size,r.to+100);if(Zt<i&&i-Zt<20)i=Zt;if(en>o&&en-o<20)o=Math.min(Dt.size,en);var u=e===true?[]:ar([{from:Zt,to:en,domStart:0}],e);var a=0;for(var f=0;f<u.length;++f){var l=u[f];if(l.from<i){l.domStart+=i-l.from;l.from=i}if(l.to>o)l.to=o;if(l.from>=l.to)u.splice(f--,1);else a+=l.to-l.from}if(a==o-i&&i==Zt&&o==en){zn(n);return}u.sort(function(e,t){return e.domStart-t.domStart});var c=Kr(),h=ut.style.display;_.style.display="none";fr(i,o,u);_.style.display=ut.style.display="";var p=i!=Zt||o!=en||tn!=Et.clientHeight+c;if(p)tn=Et.clientHeight+c;if(i!=Zt||o!=en&&s.onViewportChange)setTimeout(function(){if(s.onViewportChange)s.onViewportChange(vn,i,o)});Zt=i;en=o;Yt=V(Dt,i);li(100);if(_.childNodes.length!=en-Zt)throw new Error("BAD PATCH! "+JSON.stringify(u)+" size="+(en-Zt)+" nodes="+_.childNodes.length);if(s.lineWrapping)d();ut.style.display=h;if(p||Qt){lr()&&s.lineWrapping&&d()&&lr()}zn(n);cr();if(!t&&s.onUpdate)s.onUpdate(vn);return true}function ar(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];if(i.to<=f.from&&i.diff)s.push({from:f.from+o,to:f.to+o,domStart:f.domStart});else if(i.to<=f.from||i.from>=f.to)s.push(f);else{if(i.from>f.from)s.push({from:f.from,to:i.from,domStart:f.domStart});if(i.to<f.to)s.push({from:i.to+o,to:f.to+o,domStart:f.domStart+(i.to-f.from)})}}e=s}return e}function fr(e,t,n){function r(e){var t=e.nextSibling;e.parentNode.removeChild(e);return t}if(!n.length)bt(_);else{var i=0,s=_.firstChild,o;for(var u=0;u<n.length;++u){var a=n[u];while(a.domStart>i){s=r(s);i++}for(var f=0,l=a.to-a.from;f<l;++f){s=s.nextSibling;i++}}while(s)s=r(s)}var c=n.shift(),s=_.firstChild,f=e;Dt.iter(e,t,function(e){if(c&&c.to==f)c=n.shift();if(!c||c.from>f){if(e.hidden)var t=yt("pre");else{var t=yn(e);if(e.className)t.className=e.className;if(e.bgClassName){var r=yt("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=yt("div",[r,t],null,"position: relative")}}_.insertBefore(t,s)}else{s=s.nextSibling}++f})}function lr(){if(!s.gutter&&!s.lineNumbers)return;var e=at.offsetHeight,t=Et.clientHeight;ut.style.height=(e-t<2?t:e)+"px";var n=document.createDocumentFragment(),r=Zt,i;Dt.iter(Zt,Math.max(en,Zt+1),function(e){if(e.hidden){n.appendChild(yt("pre"))}else{var t=e.gutterMarker;var o=s.lineNumbers?s.lineNumberFormatter(r+s.firstLineNumber):null;if(t&&t.text)o=t.text.replace("%N%",o!=null?o:"");else if(o==null)o=" ";var u=n.appendChild(yt("pre",null,t&&t.style));u.innerHTML=o;for(var a=1;a<e.height;++a){u.appendChild(yt("br"));u.appendChild(document.createTextNode(" "))}if(!t)i=r}++r});ut.style.display="none";wt(ot,n);if(i!=null&&s.lineNumbers){var o=ot.childNodes[i-Zt];var u=String(Dt.size).length,a=lt(o.firstChild),f="";while(a.length+f.length<u)f+=" ";if(f)o.insertBefore(document.createTextNode(f),o.firstChild)}ut.style.display="";var l=Math.abs((parseInt(G.style.marginLeft)||0)-ut.offsetWidth)>2;G.style.marginLeft=ut.offsetWidth+"px";Qt=false;return l}function cr(){var e=vt(Bt.from,Bt.to);var t=zr(Bt.from,true);var n=e?t:zr(Bt.to,true);var r=Bt.inverted?t:n,i=Kr();var o=ft(Lt),u=ft(_);k.style.top=Math.max(0,Math.min(Et.offsetHeight,r.y+u.top-o.top))+"px";k.style.left=Math.max(0,Math.min(Et.offsetWidth,r.x+u.left-o.left))+"px";if(e){F.style.top=r.y+"px";F.style.left=(s.lineWrapping?Math.min(r.x,G.offsetWidth):r.x)+"px";F.style.display="";j.style.display="none"}else{var a=t.y==n.y,f=document.createDocumentFragment();var l=G.clientWidth||G.offsetWidth;var c=G.clientHeight||G.offsetHeight;var h=function(e,t,n,r){var i=y?"width: "+(!n?l:l-n-e)+"px":"right: "+n+"px";f.appendChild(yt("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(Bt.from.ch&&t.y>=0){var p=a?l-n.x:0;h(t.x,t.y,p,i)}var d=Math.max(0,t.y+(Bt.from.ch?i:0));var v=Math.min(n.y,c)-d;if(v>.2*i)h(0,d,0,v);if((!a||!Bt.from.ch)&&n.y<c-.5*i)h(0,n.y,l-n.x,i);wt(j,f);F.style.display="none";j.style.display=""}}function hr(e){if(e)jt=jt||(Bt.inverted?Bt.to:Bt.from);else jt=null}function pr(e,t){var n=jt&&yr(jt);if(n){if(mt(n,e))e=n;else if(mt(t,n))t=n}dr(e,t);Vt=true}function dr(e,t,n,r){an=null;if(n==null){n=Bt.from.line;r=Bt.to.line}if(vt(Bt.from,e)&&vt(Bt.to,t))return;if(mt(t,e)){var i=t;t=e;e=i}if(e.line!=n){var o=vr(e,n,Bt.from.ch);if(!o)qr(e.line,false);else e=o}if(t.line!=r)t=vr(t,r,Bt.to.ch);if(vt(e,t))Bt.inverted=false;else if(vt(e,Bt.to))Bt.inverted=false;else if(vt(t,Bt.from))Bt.inverted=true;if(s.autoClearEmptyLines&&vt(Bt.from,Bt.to)){var u=Bt.inverted?e:t;if(u.line!=Bt.from.line&&Bt.from.line<Dt.size){var a=mn(Bt.from.line);if(/^\s+$/.test(a.text))setTimeout(di(function(){if(a.parent&&/^\s+$/.test(a.text)){var e=W(a);Xn("",{line:e,ch:0},{line:e,ch:a.text.length})}},10))}}Bt.from=e;Bt.to=t;Kt=true}function vr(e,t,n){function r(t){var r=e.line+t,i=t==1?Dt.size:-1;while(r!=i){var o=mn(r);if(!o.hidden){var u=e.ch;if(s||u>n||u>o.text.length)u=o.text.length;return{line:r,ch:u}}r+=t}}var i=mn(e.line);var s=e.ch==i.text.length&&e.ch!=n;if(!i.hidden)return e;if(e.line>=t)return r(1)||r(-1);else return r(-1)||r(1)}function mr(e,t,n){var r=yr({line:e,ch:t||0});(n?pr:dr)(r,r)}function gr(e){return Math.max(0,Math.min(e,Dt.size-1))}function yr(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Dt.size)return{line:Dt.size-1,ch:mn(Dt.size-1).text.length};var t=e.ch,n=mn(e.line).text.length;if(t==null||t>n)return{line:e.line,ch:n};else if(t<0)return{line:e.line,ch:0};else return e}function br(e,t){function o(){for(var t=r+e,n=e<0?-1:Dt.size;t!=n;t+=e){var i=mn(t);if(!i.hidden){r=t;s=i;return true}}}function u(t){if(i==(e<0?0:s.text.length)){if(!t&&o())i=e<0?s.text.length:0;else return false}else i+=e;return true}var n=Bt.inverted?Bt.from:Bt.to,r=n.line,i=n.ch;var s=mn(r);if(t=="char")u();else if(t=="column")u(true);else if(t=="word"){var a=false;for(;;){if(e<0)if(!u())break;if(Tt(s.text.charAt(i)))a=true;else if(a){if(e<0){e=1;u()}break}if(e>0)if(!u())break}}return{line:r,ch:i}}function wr(e,t){var n=e<0?Bt.from:Bt.to;if(jt||vt(Bt.from,Bt.to))n=br(e,t);mr(n.line,n.ch,true)}function Er(e,t){if(!vt(Bt.from,Bt.to))Xn("",Bt.from,Bt.to);else if(e<0)Xn("",br(e,t),Bt.to);else Xn("",Bt.from,br(e,t));Vt=true}function Sr(e,t){var n=0,r=zr(Bt.inverted?Bt.from:Bt.to,true);if(an!=null)r.x=an;if(t=="page"){var i=Math.min(Et.clientHeight,window.innerHeight||document.documentElement.clientHeight);var s=Wr(r.x,r.y+i*e)}else if(t=="line"){var o=Kr();var s=Wr(r.x,r.y+.5*o+e*o)}if(t=="page")M.scrollTop+=zr(s,true).y-r.y;mr(s.line,s.ch,true);an=r.x}function xr(e){var t=mn(e.line).text;var n=e.ch,r=e.ch;if(t){if(e.after===false||r==t.length)--n;else++r;var i=t.charAt(n);var s=Tt(i)?Tt:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&Tt(e)};while(n>0&&s(t.charAt(n-1)))--n;while(r<t.length&&s(t.charAt(r)))++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function Tr(e){pr({line:e,ch:0},yr({line:e+1,ch:0}))}function Nr(e){if(vt(Bt.from,Bt.to))return Cr(Bt.from.line,e);var t=Bt.to.line-(Bt.to.ch?0:1);for(var n=Bt.from.line;n<=t;++n)Cr(n,e)}function Cr(e,t){if(!t)t="add";if(t=="smart"){if(!_t.indent)t="prev";else var n=ai(e)}var r=mn(e),i=r.indentation(s.tabSize),o=r.text.match(/^\s*/)[0],u;if(t=="smart"){u=_t.indent(n,r.text.slice(o.length),r.text);if(u==it)t="prev"}if(t=="prev"){if(e)u=mn(e-1).indentation(s.tabSize);else u=0}else if(t=="add")u=i+s.indentUnit;else if(t=="subtract")u=i-s.indentUnit;u=Math.max(0,u);var a=u-i;var f="",l=0;if(s.indentWithTabs)for(var c=Math.floor(u/s.tabSize);c;--c){l+=s.tabSize;f+="	"}if(l<u)f+=ht(u-l);if(f!=o)Xn(f,{line:e,ch:0},{line:e,ch:o.length});r.stateAfter=null}function kr(){_t=e.getMode(s,s.mode);Dt.iter(0,Dt.size,function(e){e.stateAfter=null});Pt=0;li(100)}function Lr(){var e=s.gutter||s.lineNumbers;ut.style.display=e?"":"none";if(e)Qt=true;else _.parentNode.style.marginLeft=0}function Ar(e,t){if(s.lineWrapping){Lt.className+=" CodeMirror-wrap";var n=Et.clientWidth/Yr()-3;Dt.iter(0,Dt.size,function(e){if(e.hidden)return;var t=Math.ceil(e.text.length/n)||1;if(t!=1)gn(e,t)});G.style.minWidth=I.style.left=""}else{Lt.className=Lt.className.replace(" CodeMirror-wrap","");Wn();Dt.iter(0,Dt.size,function(e){if(e.height!=1&&!e.hidden)gn(e,1)})}$t.push({from:0,to:Dt.size})}function Or(){Et.className=Et.className.replace(/\s*cm-s-\S+/g,"")+s.theme.replace(/(^|\s)\s*/g," cm-s-")}function Mr(){var e=l[s.keyMap].style;Lt.className=Lt.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function _r(e,t){this.lines=[];this.type=e;if(t)this.style=t}function Dr(e,t,n,r){e=yr(e);t=yr(t);var i=new _r("range",n);if(r)for(var s in r)if(r.hasOwnProperty(s))i[s]=r[s];var o=e.line;Dt.iter(o,t.line+1,function(n){var r={from:o==e.line?e.ch:null,to:o==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]);i.lines.push(n);++o});$t.push({from:e.line,to:t.line+1});return i}function Pr(e){e=yr(e);var t=new _r("bookmark"),n=mn(e.line);fn.addChange(e.line,1,[B(n.text,n.markedSpans)],true);var r={from:e.ch,to:e.ch,marker:t};n.markedSpans=(n.markedSpans||[]).concat([r]);t.lines.push(n);return t}function Hr(e){e=yr(e);var t=[],n=mn(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];if((i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch))t.push(i.marker)}return t}function Br(e,t,n){if(typeof e=="number")e=mn(gr(e));e.gutterMarker={text:t,style:n};Qt=true;return e}function jr(e){if(typeof e=="number")e=mn(gr(e));e.gutterMarker=null;Qt=true}function Fr(e,t){var n=e,r=e;if(typeof e=="number")r=mn(gr(e));else n=W(e);if(n==null)return null;if(t(r,n))$t.push({from:n,to:n+1});else return null;return r}function Ir(e,t,n){return Fr(e,function(e){if(e.className!=t||e.bgClassName!=n){e.className=t;e.bgClassName=n;return true}})}function qr(e,t){return Fr(e,function(e,n){if(e.hidden!=t){e.hidden=t;if(!s.lineWrapping){if(t&&e.text.length==rn.text.length){sn=true}else if(!t&&e.text.length>rn.text.length){rn=e;sn=false}}gn(e,t?0:1);var r=Bt.from.line,i=Bt.to.line;if(t&&(r==n||i==n)){var o=r==n?vr({line:r,ch:0},r,0):Bt.from;var u=i==n?vr({line:i,ch:0},i,0):Bt.to;if(!u)return;dr(o,u)}return Qt=true}})}function Rr(e){if(typeof e=="number"){if(!dn(e))return null;var t=e;e=mn(e);if(!e)return null}else{var t=W(e);if(t==null)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function Ur(e,t){if(t==0)return{top:0,left:0};var n=yn(e,t);wt(J,n);var r=n.anchor;var i=r.offsetTop,s=r.offsetLeft;if(v&&i==0&&s==0){var o=yt("span","x");r.parentNode.insertBefore(o,r.nextSibling);i=o.offsetTop}return{top:i,left:s}}function zr(e,t){var n,r=Kr(),i=r*(V(Dt,e.line)-(t?Yt:0));if(e.ch==0)n=0;else{var o=Ur(mn(e.line),e.ch);n=o.left;if(s.lineWrapping)i+=Math.max(0,o.top)}return{x:n,y:i,yBot:i+r}}function Wr(e,t){function h(e){var t=Ur(u,e);if(f){var r=Math.round(t.top/n);c=r!=l;return Math.max(0,t.left+(r-l)*Et.clientWidth)}return t.left}var n=Kr(),r=Yr(),i=Yt+Math.floor(t/n);if(i<0)return{line:0,ch:0};var o=X(Dt,i);if(o>=Dt.size)return{line:Dt.size-1,ch:mn(Dt.size-1).text.length};var u=mn(o),a=u.text;var f=s.lineWrapping,l=f?i-V(Dt,o):0;if(e<=0&&l==0)return{line:o,ch:0};var c=false;var p=0,d=0,v=a.length,m;var g=Math.min(v,Math.ceil((e+l*Et.clientWidth*.9)/r));for(;;){var y=h(g);if(y<=e&&g<v)g=Math.min(v,Math.ceil(g*1.2));else{m=y;v=g;break}}if(e>m)return{line:o,ch:v};g=Math.floor(v*.8);y=h(g);if(y<e){p=g;d=y}for(;;){if(v-p<=1){var b=e-d<m-e;return{line:o,ch:b?p:v,after:b}}var w=Math.ceil((p+v)/2),E=h(w);if(E>e){v=w;m=E;if(c)m+=1e3}else{p=w;d=E}}}function Xr(e){var t=zr(e,true),n=ft(G);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Kr(){if(Jr==null){Jr=yt("pre");for(var e=0;e<49;++e){Jr.appendChild(document.createTextNode("x"));Jr.appendChild(yt("br"))}Jr.appendChild(document.createTextNode("x"))}var t=_.clientHeight;if(t==$r)return Vr;$r=t;wt(J,Jr.cloneNode(true));Vr=J.firstChild.offsetHeight/50||1;bt(J);return Vr}function Yr(){if(Et.clientWidth==Gr)return Qr;Gr=Et.clientWidth;var e=yt("span","x");var t=yt("pre",[e]);wt(J,t);return Qr=e.offsetWidth||10}function Zr(){return G.offsetTop}function ei(){return G.offsetLeft}function ti(e,t){var n=ft(Et,true),r,i;try{r=e.clientX;i=e.clientY}catch(e){return null}if(!t&&(r-n.left>Et.clientWidth||i-n.top>Et.clientHeight))return null;var s=ft(G,true);return Wr(r-s.left,i-s.top)}function ri(e){function i(){k.style.position="relative";S.style.cssText=r;if(g)M.scrollTop=n;Qn();if(S.selectionStart!=null){clearTimeout(ni);var e=S.value=" "+(vt(Bt.from,Bt.to)?"":S.value),t=0;Yn=" ";S.selectionStart=1;S.selectionEnd=e.length;ni=setTimeout(function i(){if(Yn==" "&&S.selectionStart==0)di(f.selectAll)(vn);else if(t++<10)ni=setTimeout(i,500);else er()},200)}}var t=ti(e),n=M.scrollTop;if(!t||E)return;if(vt(Bt.from,Bt.to)||mt(t,Bt.from)||!mt(t,Bt.to))di(mr)(t.line,t.ch);var r=S.style.cssText;k.style.position="absolute";S.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";tr();er(true);if(vt(Bt.from,Bt.to))S.value=Yn=" ";if(d){Y(e);var s=nt(window,"mouseup",function(){s();setTimeout(i,20)},true)}else{setTimeout(i,50)}}function ii(){clearInterval(Mt);var e=true;F.style.visibility="";Mt=setInterval(function(){F.style.visibility=(e=!e)?"":"hidden"},s.cursorBlinkRate)}function oi(e){function v(e,t,n){if(!e.text)return;var r=e.styles,i=o?0:e.text.length-1,s;for(var a=o?0:r.length-2,f=o?r.length:-2;a!=f;a+=2*u){var l=r[a];if(r[a+1]!=h){i+=u*l.length;continue}for(var c=o?0:l.length-1,v=o?l.length:-1;c!=v;c+=u,i+=u){if(i>=t&&i<n&&d.test(s=l.charAt(c))){var m=si[s];if(m.charAt(1)==">"==o)p.push(s);else if(p.pop()!=m.charAt(0))return{pos:i,match:false};else if(!p.length)return{pos:i,match:true}}}}}var t=Bt.inverted?Bt.from:Bt.to,n=mn(t.line),r=t.ch-1;var i=r>=0&&si[n.text.charAt(r)]||si[n.text.charAt(++r)];if(!i)return;var s=i.charAt(0),o=i.charAt(1)==">",u=o?1:-1,a=n.styles;for(var f=r+1,l=0,c=a.length;l<c;l+=2)if((f-=a[l].length)<=0){var h=a[l+1];break}var p=[n.text.charAt(r)],d=/[(){}[\]]/;for(var l=t.line,c=o?Math.min(l+100,Dt.size):Math.max(-1,l-100);l!=c;l+=u){var n=mn(l),m=l==t.line;var g=v(n,m&&o?r+1:0,m&&!o?r:n.text.length);if(g)break}if(!g)g={pos:null,match:false};var h=g.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var y=Dr({line:t.line,ch:r},{line:t.line,ch:r+1},h),b=g.pos!=null&&Dr({line:l,ch:g.pos},{line:l,ch:g.pos+1},h);var w=di(function(){y.clear();b&&b.clear()});if(e)setTimeout(w,800);else nn=w}function ui(e){var t,n;for(var r=e,i=e-40;r>i;--r){if(r==0)return 0;var o=mn(r-1);if(o.stateAfter)return r;var u=o.indentation(s.tabSize);if(n==null||t>u){n=r-1;t=u}}return n}function ai(e){var t=ui(e),n=t&&mn(t-1).stateAfter;if(!n)n=C(_t);else n=N(_t,n);Dt.iter(t,e,function(r){r.process(_t,n,s.tabSize);r.stateAfter=t==e-1||t%5==0?N(_t,n):null});return n}function fi(){if(Pt>=en)return;var e=+(new Date)+s.workTime,t=N(_t,ai(Pt));var n=Pt;Dt.iter(Pt,en,function(n){if(Pt>=Zt){n.highlight(_t,t,s.tabSize);n.stateAfter=N(_t,t)}else{n.process(_t,t,s.tabSize);n.stateAfter=Pt%5==0?N(_t,t):null}++Pt;if(+(new Date)>e){li(s.workDelay);return true}});if(en>n&&Pt>=Zt)di(function(){$t.push({from:n,to:Pt})})()}function li(e){if(Pt<en)Ot.set(e,fi)}function ci(){Xt=Vt=Jt=null;$t=[];Kt=false;Gt=[]}function hi(){if(sn)Wn();if(on&&!s.lineWrapping){var e=I.offsetWidth,t=Ur(rn,rn.text.length).left;if(!m){I.style.left=t+"px";G.style.minWidth=t+e+"px"}on=false}var n,r;if(Kt){var i=rr();n=sr(i.x,i.y,i.x,i.yBot)}if($t.length||n&&n.scrollTop!=null)r=ur($t,true,n&&n.scrollTop);if(!r){if(Kt)cr();if(Qt)lr()}if(n)nr();if(Kt)ii();if(Ht&&(Xt===true||Xt!==false&&Kt))er(Vt);if(Kt&&s.matchBrackets)setTimeout(di(function(){if(nn){nn();nn=null}if(vt(Bt.from,Bt.to))oi(false)}),20);var o=Kt,u=Gt;if(Jt&&s.onChange&&vn)s.onChange(vn,Jt);if(o&&s.onCursorActivity)s.onCursorActivity(vn);for(var a=0;a<u.length;++a)u[a](vn);if(r&&s.onUpdate)s.onUpdate(vn)}function di(e){return function(){if(!(pi++))ci();try{var t=e.apply(this,arguments)}finally{if(!--pi)hi()}return t}}function vi(e){fn.startCompound();try{return e()}finally{fn.endCompound()}}var s={},a=e.defaults;for(var w in a)if(a.hasOwnProperty(w))s[w]=(i&&i.hasOwnProperty(w)?i:a)[w];var S=yt("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");S.setAttribute("wrap","off");S.setAttribute("autocorrect","off");S.setAttribute("autocapitalize","off");var k=yt("div",[S],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");var L=yt("div",null,"CodeMirror-scrollbar-inner");var M=yt("div",[L],"CodeMirror-scrollbar");var _=yt("div"),j=yt("div",null,null,"position: relative; z-index: -1");var F=yt("pre"," ","CodeMirror-cursor"),I=yt("pre"," ","CodeMirror-cursor","visibility: hidden");var J=yt("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;");var G=yt("div",[J,F,I,j,_],null,"position: relative; z-index: 0");var ot=yt("div",null,"CodeMirror-gutter-text"),ut=yt("div",[ot],"CodeMirror-gutter");var at=yt("div",[ut,yt("div",[G],"CodeMirror-lines")],null,"position: relative");var ct=yt("div",[at],null,"position: relative");var Et=yt("div",[ct],"CodeMirror-scroll");Et.setAttribute("tabIndex","-1");var Lt=yt("div",[k,M,Et],"CodeMirror"+(s.lineWrapping?" CodeMirror-wrap":""));if(r.appendChild)r.appendChild(Lt);else r(Lt);Or();Mr();if(t)S.style.width="0px";if(!b)Et.draggable=true;G.style.outline="none";if(s.tabindex!=null)S.tabIndex=s.tabindex;if(s.autofocus)tr();if(!s.gutter&&!s.lineNumbers)ut.style.display="none";if(x)k.style.height="1px",k.style.position="absolute";if(T){M.style.zIndex=-2;M.style.visibility="hidden"}else if(m)M.style.minWidth="18px";var At=new rt,Ot=new rt,Mt;var _t,Dt=new U([new R([new q("")])]),Pt=0,Ht;kr();var Bt={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var jt,Ft,It,qt=0,Rt,Ut=false,zt=false,Wt=false;var Xt,Vt,$t,Jt,Kt,Qt,Gt;var Yt=0,Zt=0,en=0,tn=0;var nn;var rn=mn(0),sn=false,on=true;var un=false;var an=null;di(function(){bn(s.value||"");Xt=false})();var fn=new $;nt(Et,"mousedown",di(xn));nt(Et,"dblclick",di(Tn));nt(G,"selectstart",Q);if(!d)nt(Et,"contextmenu",ri);nt(Et,"scroll",Sn);nt(M,"scroll",En);nt(M,"mousedown",function(){if(Ht)setTimeout(tr,0)});var ln=nt(window,"resize",function(){if(Lt.parentNode)ur(true);else ln()},true);nt(S,"keyup",di(Pn));nt(S,"input",Gn);nt(S,"keydown",di(_n));nt(S,"keypress",di(Dn));nt(S,"focus",Hn);nt(S,"blur",Bn);if(s.dragDrop){nt(Et,"dragstart",Cn);nt(Et,"dragenter",cn);nt(Et,"dragover",cn);nt(Et,"drop",di(Nn))}nt(Et,"paste",function(){tr();Gn()});nt(S,"paste",function(){Wt=true;Gn()});nt(S,"cut",di(function(){if(!s.readOnly)Vn("")}));if(x)nt(ct,"mouseup",function(){if(document.activeElement==S)S.blur();tr()});var hn;try{hn=document.activeElement==S}catch(pn){}if(hn||s.autofocus)setTimeout(Hn,20);else Bn();var vn=Lt.CodeMirror={getValue:wn,setValue:di(bn),getSelection:Kn,replaceSelection:di(Vn),focus:function(){window.focus();tr();Hn();Gn()},setOption:function(e,t){var n=s[e];s[e]=t;if(e=="mode"||e=="indentUnit")kr();else if(e=="readOnly"&&t=="nocursor"){Bn();S.blur()}else if(e=="readOnly"&&!t){er(true)}else if(e=="theme")Or();else if(e=="lineWrapping"&&n!=t)di(Ar)();else if(e=="tabSize")ur(true);else if(e=="keyMap")Mr();else if(e=="tabindex")S.tabIndex=t;if(e=="lineNumbers"||e=="gutter"||e=="firstLineNumber"||e=="theme"||e=="lineNumberFormatter"){Lr();ur(true)}},getOption:function(e){return s[e]},getMode:function(){return _t},undo:di(In),redo:di(qn),indentLine:di(function(e,t){if(typeof t!="string"){if(t==null)t=s.smartIndent?"smart":"prev";else t=t?"add":"subtract"}if(dn(e))Cr(e,t)}),indentSelection:di(Nr),historySize:function(){return{undo:fn.done.length,redo:fn.undone.length}},clearHistory:function(){fn=new $},setHistory:function(e){fn=new $;fn.done=e.done;fn.undone=e.undone},getHistory:function(){function e(e){for(var t=0,n=[],r;t<e.length;++t){n.push(r=[]);for(var i=0,s=e[t];i<s.length;++i){var o=[],u=s[i];r.push({start:u.start,added:u.added,old:o});for(var a=0;a<u.old.length;++a)o.push(P(u.old[a]))}}return n}return{done:e(fn.done),undone:e(fn.undone)}},matchBrackets:di(function(){oi(true)}),getTokenAt:di(function(e){e=yr(e);return mn(e.line).getTokenAt(_t,ai(e.line),s.tabSize,e.ch)}),getStateAfter:function(e){e=gr(e==null?Dt.size-1:e);return ai(e+1)},cursorCoords:function(e,t){if(e==null)e=Bt.inverted;return this.charCoords(e?Bt.from:Bt.to,t)},charCoords:function(e,t){e=yr(e);if(t=="local")return zr(e,false);if(t=="div")return zr(e,true);return Xr(e)},coordsChar:function(e){var t=ft(G);return Wr(e.x-t.left,e.y-t.top)},markText:di(Dr),setBookmark:Pr,findMarksAt:Hr,setMarker:di(Br),clearMarker:di(jr),setLineClass:di(Ir),hideLine:di(function(e){return qr(e,true)}),showLine:di(function(e){return qr(e,false)}),onDeleteLine:function(e,t){if(typeof e=="number"){if(!dn(e))return null;e=mn(e)}(e.handlers||(e.handlers=[])).push(t);return e},lineInfo:Rr,getViewport:function(){return{from:Zt,to:en}},addWidget:function(e,t,n,r,i){e=zr(yr(e));var s=e.yBot,o=e.x;t.style.position="absolute";ct.appendChild(t);if(r=="over")s=e.y;else if(r=="near"){var u=Math.max(Et.offsetHeight,Dt.height*Kr()),a=Math.max(ct.clientWidth,G.clientWidth)-ei();if(e.yBot+t.offsetHeight>u&&e.y>t.offsetHeight)s=e.y-t.offsetHeight;if(o+t.offsetWidth>a)o=a-t.offsetWidth}t.style.top=s+Zr()+"px";t.style.left=t.style.right="";if(i=="right"){o=ct.clientWidth-t.offsetWidth;t.style.right="0px"}else{if(i=="left")o=0;else if(i=="middle")o=(ct.clientWidth-t.offsetWidth)/2;t.style.left=o+ei()+"px"}if(n)ir(o,s,o+t.offsetWidth,s+t.offsetHeight)},lineCount:function(){return Dt.size},clipPos:yr,getCursor:function(e){if(e==null)e=Bt.inverted;return gt(e?Bt.from:Bt.to)},somethingSelected:function(){return!vt(Bt.from,Bt.to)},setCursor:di(function(e,t,n){if(t==null&&typeof e.line=="number")mr(e.line,e.ch,n);else mr(e,t,n)}),setSelection:di(function(e,t,n){(n?pr:dr)(yr(e),yr(t||e))}),getLine:function(e){if(dn(e))return mn(e).text},getLineHandle:function(e){if(dn(e))return mn(e)},setLine:di(function(e,t){if(dn(e))Xn(t,{line:e,ch:0},{line:e,ch:mn(e).text.length})}),removeLine:di(function(e){if(dn(e))Xn("",{line:e,ch:0},yr({line:e+1,ch:0}))}),replaceRange:di(Xn),getRange:function(e,t,n){return Jn(yr(e),yr(t),n)},triggerOnKeyDown:di(_n),execCommand:function(e){return f[e](vn)},moveH:di(wr),deleteH:di(Er),moveV:di(Sr),toggleOverwrite:function(){if(Ut){Ut=false;F.className=F.className.replace(" CodeMirror-overwrite","")}else{Ut=true;F.className+=" CodeMirror-overwrite"}},posFromIndex:function(e){var t=0,n;Dt.iter(0,Dt.size,function(r){var i=r.text.length+1;if(i>e){n=e;return true}e-=i;++t});return yr({line:t,ch:n})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;Dt.iter(0,e.line,function(e){t+=e.text.length+1});return t},scrollTo:function(e,t){if(e!=null)Et.scrollLeft=e;if(t!=null)M.scrollTop=Et.scrollTop=t;ur([])},getScrollInfo:function(){return{x:Et.scrollLeft,y:M.scrollTop,height:M.scrollHeight,width:Et.scrollWidth}},setSize:function(e,t){function n(e){e=String(e);return/^\d+$/.test(e)?e+"px":e}if(e!=null)Lt.style.width=n(e);if(t!=null)Et.style.height=n(t);vn.refresh()},operation:function(e){return di(e)()},compoundChange:function(e){return vi(e)},refresh:function(){ur(true,null,qt);if(M.scrollHeight>qt)M.scrollTop=qt},getInputField:function(){return S},getWrapperElement:function(){return Lt},getScrollerElement:function(){return Et},getGutterElement:function(){return ut}};var Ln;var Mn=null;var Yn="";_r.prototype.clear=di(function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n];var i=A(r.markedSpans,this);if(i.from!=null)e=W(r);if(i.to!=null)t=W(r);r.markedSpans=O(r.markedSpans,i)}if(e!=null)$t.push({from:e,to:t+1});this.lines.length=0;this.explicitlyCleared=true});_r.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n];var i=A(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=W(r);if(i.from!=null)e={line:s,ch:i.from};if(i.to!=null)t={line:s,ch:i.to}}}if(this.type=="bookmark")return e;return e&&{from:e,to:t}};var Vr,$r,Jr;var Qr,Gr=0;var ni;var si={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};var pi=0;for(var mi in o)if(o.propertyIsEnumerable(mi)&&!vn.propertyIsEnumerable(mi))vn[mi]=o[mi];for(var gi=0;gi<u.length;++gi)u[gi](vn);return vn}function c(e){if(typeof e=="string")return l[e];else return e}function h(e,t,n,r,i){function s(t){t=c(t);var n=t[e];if(n===false){if(i)i();return true}if(n!=null&&r(n))return true;if(t.nofallthrough){if(i)i();return true}var o=t.fallthrough;if(o==null)return false;if(Object.prototype.toString.call(o)!="[object Array]")return s(o);for(var u=0,a=o.length;u<a;++u){if(s(o[u]))return true}return false}if(t&&s(t))return true;return s(n)}function p(e){var t=kt[tt(e,"keyCode")];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function N(e,t){if(t===true)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];if(i instanceof Array)i=i.concat([]);n[r]=i}return n}function C(e,t,n){return e.startState?e.startState(t,n):true}function k(e,t){this.pos=this.start=0;this.string=e;this.tabSize=t||8}function L(e,t,n){this.from=e;this.to=t;this.marker=n}function A(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function O(e,t){var n;for(var r=0;r<e.length;++r)if(e[r]!=t)(n||(n=[])).push(e[r]);return n}function M(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker;var u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||o.type=="bookmark"&&s.from==t&&s.from!=n){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function _(e,t){if(e)for(var n=0,r;n<e.length;++n){var i=e[n],s=i.marker;var o=i.to==null||(s.inclusiveRight?i.to>=t:i.to>t);if(o||s.type=="bookmark"&&i.from==t){var u=i.from==null||(s.inclusiveLeft?i.from<=t:i.from<t);(r||(r=[])).push({from:u?null:i.from-t,to:i.to==null?null:i.to-t,marker:s})}}return r}function D(e,t,n,r,i){if(!e&&!t)return i;var s=M(e,n);var o=_(t,r);var u=i.length==1,a=pt(i).length+(u?n:0);if(s){for(var f=0;f<s.length;++f){var l=s[f];if(l.to==null){var c=A(o,l.marker);if(!c)l.to=n;else if(u)l.to=c.to==null?null:c.to+a}}}if(o){for(var f=0;f<o.length;++f){var l=o[f];if(l.to!=null)l.to+=a;if(l.from==null){var c=A(s,l.marker);if(!c){l.from=a;if(u)(s||(s=[])).push(l)}}else{l.from+=a;if(u)(s||(s=[])).push(l)}}}var h=[B(i[0],s)];if(!u){var p=i.length-2,d;if(p>0&&s)for(var f=0;f<s.length;++f)if(s[f].to==null)(d||(d=[])).push({from:null,to:null,marker:s[f].marker});for(var f=0;f<p;++f)h.push(B(i[f+1],d));h.push(B(pt(i),o))}return h}function P(e){return typeof e=="string"?e:e.text}function H(e){if(typeof e=="string")return null;var t=e.markedSpans,n=null;for(var r=0;r<t.length;++r){if(t[r].marker.explicitlyCleared){if(!n)n=t.slice(0,r)}else if(n)n.push(t[r])}return!n?t:n.length?n:null}function B(e,t){return t?{text:e,markedSpans:t}:e}function j(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n){var r=t[n].marker.lines;var i=xt(r,e);r.splice(i,1)}e.markedSpans=null}function F(e,t){if(!t)return;for(var n=0;n<t.length;++n)var r=t[n].marker.lines.push(e);e.markedSpans=t}function q(e,t){this.text=e;this.height=1;F(this,t)}function R(e){this.lines=e;this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t){e[t].parent=this;r+=e[t].height}this.height=r}function U(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize();n+=s.height;s.parent=this}this.size=t;this.height=n;this.parent=null}function z(e,t){while(!e.lines){for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}}return e.lines[t]}function W(e){if(e.parent==null)return null;var t=e.parent,n=xt(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent){for(var i=0,s=r.children.length;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}}return n}function X(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o;n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function V(e,t){var n=0;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.chunkSize();if(t<o){e=s;continue e}t-=o;n+=s.height}return n}while(!e.lines);for(var r=0;r<t;++r)n+=e.lines[r].height;return n}function $(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}function J(){Y(this)}function K(e){if(!e.stop)e.stop=J;return e}function Q(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false}function G(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true}function Y(e){Q(e);G(e)}function Z(e){return e.target||e.srcElement}function et(e){var t=e.which;if(t==null){if(e.button&1)t=1;else if(e.button&2)t=3;else if(e.button&4)t=2}if(n&&e.ctrlKey&&t==1)t=3;return t}function tt(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function nt(e,t,n,r){if(typeof e.addEventListener=="function"){e.addEventListener(t,n,false);if(r)return function(){e.removeEventListener(t,n,false)}}else{var i=function(e){n(e||window.event)};e.attachEvent("on"+t,i);if(r)return function(){e.detachEvent("on"+t,i)}}}function rt(){this.id=null}function at(e,t,n){if(t==null){t=e.search(/[^\s\u00a0]/);if(t==-1)t=e.length}for(var r=0,i=0;r<t;++r){if(e.charAt(r)=="	")i+=n-i%n;else++i}return i}function ft(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t){if(window.pageYOffset==null){var i=document.documentElement||document.body.parentNode;if(i.scrollTop==null)i=document.body;n.top+=i.scrollTop;n.left+=i.scrollLeft}else{n.top+=window.pageYOffset;n.left+=window.pageXOffset}}return n}function lt(e){return e.textContent||e.innerText||e.nodeValue||""}function ht(e){while(ct.length<=e)ct.push(pt(ct)+" ");return ct[e]}function pt(e){return e[e.length-1]}function dt(e){if(t){e.selectionStart=0;e.selectionEnd=e.value.length}else e.select()}function vt(e,t){return e.line==t.line&&e.ch==t.ch}function mt(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function gt(e){return{line:e.line,ch:e.ch}}function yt(e,t,n,r){var i=document.createElement(e);if(n)i.className=n;if(r)i.style.cssText=r;if(typeof t=="string")Et(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function bt(e){e.innerHTML="";return e}function wt(e,t){bt(e).appendChild(t)}function Et(e,t){if(g){e.innerHTML="";e.appendChild(document.createTextNode(t))}else e.textContent=t}function St(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0;--n,--r)if(e.charAt(n)!=t.charAt(r))break;return r+1}function xt(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function Tt(e){return/\w/.test(e)||e.toUpperCase()!=e.toLowerCase()||/[\u4E00-\u9FA5]/.test(e)}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var t=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var n=t||/Mac/.test(navigator.platform);var r=/Win/.test(navigator.platform);var i=e.modes={},s=e.mimeModes={};e.defineMode=function(t,n){if(!e.defaults.mode&&t!="null")e.defaults.mode=t;if(arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}i[t]=n};e.defineMIME=function(e,t){s[e]=t};e.resolveMode=function(t){if(typeof t=="string"&&s.hasOwnProperty(t))t=s[t];else if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");if(typeof t=="string")return{name:t};else return t||{name:"null"}};e.getMode=function(t,n){var n=e.resolveMode(n);var r=i[n.name];if(!r)return e.getMode(t,"text/plain");var s=r(t,n);if(a.hasOwnProperty(n.name)){var o=a[n.name];for(var u in o)if(o.hasOwnProperty(u))s[u]=o[u]}s.name=n.name;return s};e.listModes=function(){var e=[];for(var t in i)if(i.propertyIsEnumerable(t))e.push(t);return e};e.listMIMEs=function(){var e=[];for(var t in s)if(s.propertyIsEnumerable(t))e.push({mime:t,mode:s[t]});return e};var o=e.extensions={};e.defineExtension=function(e,t){o[e]=t};var u=[];e.defineInitHook=function(e){u.push(e)};var a=e.modeExtensions={};e.extendMode=function(e,t){var n=a.hasOwnProperty(e)?a[e]:a[e]={};for(var r in t)if(t.hasOwnProperty(r))n[r]=t[r]};var f=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(true),n=e.getCursor(false),r=!vt(t,n);if(!r&&e.getLine(t.line).length==t.ch)e.replaceRange("",t,{line:t.line+1,ch:0});else e.replaceRange("",t,r?n:{line:t.line})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,true)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,true)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,true)},goLineStartSmart:function(e){var t=e.getCursor();var n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,true)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,true)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end")},defaultTab:function(e){if(e.somethingSelected())e.indentSelection("add");else e.replaceSelection("	","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);if(t.ch>0&&t.ch<n.length-1)e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end");e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}};var l=e.keyMap={};l.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};l.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};l.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};l["default"]=n?l.macDefault:l.pcDefault;l.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};e.isModifierKey=p;e.fromTextArea=function(t,n){function s(){t.value=a.getValue()}if(!n)n={};n.value=t.value;if(!n.tabindex&&t.tabindex)n.tabindex=t.tabindex;if(n.autofocus==null){var r=document.body;try{r=document.activeElement}catch(i){}n.autofocus=r==t||t.getAttribute("autofocus")!=null&&r==document.body}if(t.form){var o=nt(t.form,"submit",s,true);if(typeof t.form.submit=="function"){var u=t.form.submit;t.form.submit=function f(){s();t.form.submit=u;t.form.submit();t.form.submit=f}}}t.style.display="none";var a=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);a.save=s;a.getTextArea=function(){return t};a.toTextArea=function(){s();t.parentNode.removeChild(a.getWrapperElement());t.style.display="";if(t.form){o();if(typeof t.form.submit=="function")t.form.submit=u}};return a};var d=/gecko\/\d{7}/i.test(navigator.userAgent);var v=/MSIE \d/.test(navigator.userAgent);var m=/MSIE [1-7]\b/.test(navigator.userAgent);var g=/MSIE [1-8]\b/.test(navigator.userAgent);var y=v&&document.documentMode==5;var b=/WebKit\//.test(navigator.userAgent);var w=/Chrome\//.test(navigator.userAgent);var E=/Opera\//.test(navigator.userAgent);var S=/Apple Computer/.test(navigator.vendor);var x=/KHTML\//.test(navigator.userAgent);var T=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);e.copyState=N;e.startState=C;e.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);t=n.state;e=n.mode}return n||{mode:e,state:t}};k.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n){++this.pos;return t}},eatWhile:function(e){var t=this.pos;while(this.eat(e)){}return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return true}},backUp:function(e){this.pos-=e},column:function(){return at(this.string,this.start,this.tabSize)},indentation:function(){return at(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e=="string"){var r=function(e){return n?e.toLowerCase():e};if(r(this.string).indexOf(r(e),this.pos)==this.pos){if(t!==false)this.pos+=e.length;return true}}else{var i=this.string.slice(this.pos).match(e);if(i&&i.index>0)return null;if(i&&t!==false)this.pos+=i[0].length;return i}},current:function(){return this.string.slice(this.start,this.pos)}};e.StringStream=k;var I=" ";if(d||v&&!m)I="​";else if(E)I="";q.prototype={update:function(e,t){this.text=e;this.stateAfter=this.styles=null;j(this);F(this,t)},highlight:function(e,t,n){var r=new k(this.text,n),i=this.styles||(this.styles=[]);var s=i.length=0;if(this.text==""&&e.blankLine)e.blankLine(t);while(!r.eol()){var o=e.token(r,t),u=r.current();r.start=r.pos;if(s&&i[s-1]==o){i[s-2]+=u}else if(u){i[s++]=u;i[s++]=o}if(r.pos>5e3){i[s++]=this.text.slice(r.pos);i[s++]=null;break}}},process:function(e,t,n){var r=new k(this.text,n);if(this.text==""&&e.blankLine)e.blankLine(t);while(!r.eol()&&r.pos<=5e3){e.token(r,t);r.start=r.pos}},getTokenAt:function(e,t,n,r){var i=this.text,s=new k(i,n);while(s.pos<r&&!s.eol()){s.start=s.pos;var o=e.token(s,t)}return{start:s.start,end:s.pos,string:s.current(),className:o||null,state:t}},indentation:function(e){return at(this.text,null,e)},getContent:function(e,t,n){function u(t,n,o){if(!n)return;if(r&&v&&n.charAt(0)==" ")n=" "+n.slice(1);r=false;if(!s.test(n)){i+=n.length;var u=document.createTextNode(n)}else{var u=document.createDocumentFragment(),a=0;while(true){s.lastIndex=a;var f=s.exec(n);var l=f?f.index-a:n.length-a;if(l){u.appendChild(document.createTextNode(n.slice(a,a+l)));i+=l}if(!f)break;a+=l+1;if(f[0]=="	"){var c=e-i%e;u.appendChild(yt("span",ht(c),"cm-tab"));i+=c}else{var h=yt("span","•","cm-invalidchar");h.title="\\u"+f[0].charCodeAt(0).toString(16);u.appendChild(h);i+=1}}}if(o)t.appendChild(yt("span",[u],o));else t.appendChild(u)}function g(e){if(!e)return null;return"cm-"+e.replace(/ +/g," cm-")}var r=true,i=0,s=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;var o=yt("pre");var a=u;if(t!=null){var f=0,l=o.anchor=yt("span");a=function(e,r,i){var s=r.length;if(t>=f&&t<f+s){var o=t-f;if(o){u(e,r.slice(0,o),i);if(n){var c=r.slice(o-1,o+1);if(ut.test(c))e.appendChild(yt("wbr"));else if(!m&&/\w\w/.test(c))e.appendChild(document.createTextNode("‍"))}}e.appendChild(l);u(l,E?r.slice(o,o+1):r.slice(o),i);if(E)u(e,r.slice(o+1),i);t--;f+=s}else{f+=s;u(e,r,i);if(f==t&&f==d){Et(l,I);e.appendChild(l)}else if(f>t+10&&/\s/.test(r))a=function(){}}}}var c=this.styles,h=this.text,p=this.markedSpans;var d=h.length;if(!h&&t==null){a(o," ")}else if(!p||!p.length){for(var y=0,b=0;b<d;y+=2){var w=c[y],S=c[y+1],x=w.length;if(b+x>d)w=w.slice(0,d-b);b+=x;a(o,w,g(S))}}else{p.sort(function(e,t){return e.from-t.from});var T=0,y=0,N="",S,C=0;var k=p[0].from||0,L=[],A=0;var O=function(){var e;while(A<p.length&&((e=p[A]).from==T||e.from==null)){if(e.marker.type=="range")L.push(e);++A}k=A<p.length?p[A].from:Infinity;for(var t=0;t<L.length;++t){var n=L[t].to;if(n==null)n=Infinity;if(n==T)L.splice(t--,1);else k=Math.min(n,k)}};var M=0;while(T<d){if(k==T)O();var _=Math.min(d,k);while(true){if(N){var D=T+N.length;var P=S;for(var H=0;H<L.length;++H){var B=L[H];P=(P?P+" ":"")+B.marker.style;if(B.marker.endStyle&&B.to===Math.min(D,_))P+=" "+B.marker.endStyle;if(B.marker.startStyle&&B.from===T)P+=" "+B.marker.startStyle}a(o,D>_?N.slice(0,_-T):N,P);if(D>=_){N=N.slice(_-T);T=_;break}T=D}N=c[y++];S=g(c[y++])}}}return o},cleanUp:function(){this.parent=null;j(this)}};R.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;r<i;++r){var s=this.lines[r];this.height-=s.height;s.cleanUp();if(s.handlers)for(var o=0;o<s.handlers.length;++o)n.push(s.handlers[o])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n;this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return true}};U.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;i.remove(e,o,n);this.height-=u-i.height;if(s==o){this.children.splice(r--,1);i.parent=null}if((t-=o)==0)break;e=0}else e-=s}if(this.size-t<25){var a=[];this.collapse(a);this.children=[new R(a)];this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length;this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertHeight(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25);var a=new R(u);s.height-=a.height;this.children.splice(r+1,0,a);a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5);var n=new U(t);if(!e.parent){var r=new U(e.children);r.parent=e;e.children=[r,n];e=r}else{e.size-=n.size;e.height-=n.height;var i=xt(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return true;if((t-=u)==0)break;e=0}else e-=o}}};$.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+(new Date),i=pt(this.done),s=i&&pt(i);var o=r-this.time;if(i&&!this.closed&&this.compound){i.push({start:e,added:t,old:n})}else if(o>400||!s||this.closed||s.start>e+n.length||s.start+s.added<e){this.done.push([{start:e,added:t,old:n}]);this.closed=false}else{var u=Math.max(0,s.start-e),a=Math.max(0,e+n.length-(s.start+s.added));for(var f=u;f>0;--f)s.old.unshift(n[f-1]);for(var f=a;f>0;--f)s.old.push(n[n.length-f]);if(u)s.start=e;s.added+=t-(n.length-u-a)}this.time=r},startCompound:function(){if(!(this.compound++))this.closed=true},endCompound:function(){if(!--this.compound)this.closed=true}};e.e_stop=Y;e.e_preventDefault=Q;e.e_stopPropagation=G;e.connect=nt;rt.prototype={set:function(e,t){clearTimeout(this.id);this.id=setTimeout(t,e)}};var it=e.Pass={toString:function(){return"CodeMirror.Pass"}};var st=function(){if(g)return false;var e=yt("div");return"draggable"in e||"dragDrop"in e}();var ot=function(){var e=yt("textarea");e.value="foo\nbar";if(e.value.indexOf("\r")>-1)return"\r\n";return"\n"}();var ut=/^$/;if(d)ut=/$'/;else if(S)ut=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/;else if(w)ut=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/;var ct=[""];var Nt="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);if(i==-1)i=e.length;var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i);var o=s.indexOf("\r");if(o!=-1){n.push(s.slice(0,o));t+=o+1}else{n.push(s);t=i+1}}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=Nt;var Ct=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return false}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}if(!t||t.parentElement()!=e)return false;return t.compareEndPoints("StartToEnd",t)!=0};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}});e.defineMIME("text/plain","null");var kt={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};e.keyNames=kt;(function(){for(var e=0;e<10;e++)kt[e+48]=String(e);for(var e=65;e<=90;e++)kt[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)kt[e+111]=kt[e+63235]="F"+e})();e.version="2.35";return e}()
